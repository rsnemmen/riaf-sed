
# Software 

## List of codes and their functions

### Original codes (Feng's group)

`./bak/dynamics.f`, `/bak/spectrum.f`, `/bak/newsp.f`, `/bak/ssd.f`

Original codes sent by Feng.

### Core numerical routines  

**./fortran/spectrum_new.f
./fortran/dynamics_new.f
./fortran/ssd_new.f**
  My modifications with respect to dynamics.f and newsp.f. Added parameter input via standard input, descriptions, modified standard output.

```
dyn.pl    
│
└───dynamics_new.f
```

**./perl/dyn.pl**
  Given an initial range of eigenvalues, computes solutions, checks if each solution is physical and bracket the right eigenvalue automatically. This is a mix of adaf_family_manyfiles and diagnose.pl. This code tends to have the *most updated* fixes to bugs etc.

```
spectrum.pl    
│
└───spectrum_new.f
```

**./perl/spectrum.pl**
  Given a dynamical solution previously computed, calculates the spectrum. The parameters must match the dyn. solution. Currently for test purposes.

#### Thin disk


```
ssd.pl    
│
└───ssd_new.f
```
  
**./perl/ssd.pl**
  Opens a pipe to ssd_new.f and runs it.

**./fortran/ssd_alone.f**
  My modification of ssd.f where I discard the effect of the illumination of the thin disk by the ADAF. In other words, this code calculates the spectrum of a standard thin disk only.

**./perl/ssd_alone.pl**
  Pipes input into ssd_alone.f.

### Other 

**./perl/adaf.pl**  
Opens a pipe to dynamics_new and computes the dynamics for a given set of parameters. Plots Mach number vs. R as a diagnostic of the behavior of the solution.

**./perl/adaf_family.pl**
  Opens a pipe to dynamics_new and computes a family of ADAF models, varying the eigenvalue.

**./fortran/spectrum_thin.f
./fortran/dynamics_thin.f**
  Codes that enable the thin disk contribution. Feng recommended not to enable the thin disk inside the ADAF dynamics code, but use ssd.f to compute the thin disk spectrum.

./perl/diagnose.pl
  Given a log file from adaf.pl, runs a series of diagnostics on the resulting solution to check if it is consistent.
  
./perl/adaf_iterate.pl
  Calculates a series of ADAF solutions, iterating over the eigenvalue. Detects if the solution was computed successfully (but not yet whether it is physical) or whether the user interrupted the run pressing ctrl-C. Modified from adaf_family.

./perl/adaf_family_manyfiles.pl
  Calculates several ADAF solutions for a range of eigenvalues. Instead of dumping all the solutions into one file, creates individual files for each solution. I wrote this script specifically for diagnose_batch.pl.

./perl/diagnose_batch.pl
  Runs diagnose on a bunch of output files. These output files may be generated with adaf_family_manyfiles.pl for instance.

./perl/group_files.pl
  Takes the files generated by adaf_family_manyfiles.pl and concatenates all of them into one file, separates each file by two newlines. Useful for plotting all the solution together.
  
./fortran/dynamics_debug.f
./fortran/debug.f
  For debugging purposes, especially with gdb.


## Description of folders

./tests
  Several tests of the SED and dynamics.

./perl/run*
  Folders created to store results from simultaneous runs of the code. Useful for exploiting the capabilities of the multi-core processors. Each run of the code goes into only one core.